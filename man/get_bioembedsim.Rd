% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/10_calculate_bioembedsim.R
\name{get_bioembedsim}
\alias{get_bioembedsim}
\title{Calculate Biological Pathway Similarity Based on BioText Embeddings (biotext embedding similarity)}
\usage{
get_bioembedsim(
  object,
  api_provider = c("openai", "gemini"),
  text_embedding_model = NULL,
  api_key = NULL,
  include_gene_name = FALSE,
  database = c("go", "kegg", "reactome"),
  p.adjust.cutoff.go = 0.05,
  p.adjust.cutoff.kegg = 0.05,
  p.adjust.cutoff.reactome = 0.05,
  count.cutoff.go = 5,
  count.cutoff.kegg = 5,
  count.cutoff.reactome = 5,
  save_to_local = FALSE,
  path = "result"
)
}
\arguments{
\item{object}{An object of class "functional_module", typically a result from enrich_pathway function.}

\item{api_provider}{Character string specifying the API provider for text embeddings.
Options are "openai" or "gemini".}

\item{text_embedding_model}{Character string specifying the embedding model to use
(e.g., "text-embedding-3-small" for OpenAI or "text-embedding-004" for Gemini)}

\item{api_key}{Character string of the API key for the specified provider}

\item{include_gene_name}{Logical indicating whether to include annotated gene names
in the pathway descriptions (default: FALSE)}

\item{database}{Character vector of databases to include. Options are "go", "kegg",
and/or "reactome". Multiple selections allowed.}

\item{p.adjust.cutoff.go}{Numeric cutoff for adjusted p-value for GO terms (default: 0.05)}

\item{p.adjust.cutoff.kegg}{Numeric cutoff for adjusted p-value for KEGG pathways (default: 0.05)}

\item{p.adjust.cutoff.reactome}{Numeric cutoff for adjusted p-value for Reactome pathways (default: 0.05)}

\item{count.cutoff.go}{Minimum gene count cutoff for GO terms (default: 5)}

\item{count.cutoff.kegg}{Minimum gene count cutoff for KEGG pathways (default: 5)}

\item{count.cutoff.reactome}{Minimum gene count cutoff for Reactome pathways (default: 5)}

\item{save_to_local}{Logical. Whether to save the resulting data to local files. Default is \code{FALSE}.}

\item{path}{Character. The directory path where intermediate results will be saved, if \code{save_to_local = TRUE}. Default is "result".}
}
\value{
A list containing a matrix of pairwise cosine similarity values between pathways and
an object of class "functional_module" with updated parameter information.
}
\description{
This function calculates similarity between biological pathways by using text embedding
models to vectorize pathway information and compute cosine similarity between them.
It extracts text information from GO, KEGG, and/or Reactome databases based on
previously performed enrichment analyses, and uses API providers like OpenAI or Gemini
to generate embeddings.
}
\details{
The function works in three main steps:
\enumerate{
\item Extract text information from the specified databases (GO, KEGG, and/or Reactome)
\item Generate embeddings using the specified API provider and model
\item Calculate pairwise cosine similarity between pathway embeddings
}

For each database, the function filters pathways based on adjusted p-value and gene count
cutoffs. For Gemini embeddings with long texts, it may use LLM-generated summaries to fit
within token limits.
}
\examples{
\dontrun{
# For OpenAI embeddings
sim_matrix <- get_bioembedsim(
  object = my_enrichment_object,
  api_provider = "openai",
  text_embedding_model = "text-embedding-3-small",
  api_key = "your_openai_key",
  database = c("go", "kegg"),
  p.adjust.cutoff.go = 0.01,
  count.cutoff.go = 10
)

# For Gemini embeddings
sim_matrix <- get_bioembedsim(
  object = my_enrichment_object,
  api_provider = "gemini",
  text_embedding_model = "text-embedding-004",
  api_key = "your_gemini_key",
  database = "reactome",
  include_gene_name = TRUE
)
}

}
